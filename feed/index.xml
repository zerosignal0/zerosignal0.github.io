<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[The blergh]]></title>
  <link href="http://zerosignal0.github.io/feed" rel="self"/>
  <link href="http://zerosignal0.github.io/"/>
  <updated>2014-06-01T00:05:12+00:00</updated>
  <id>http://zerosignal0.github.io/</id>
  <author>
    <name><![CDATA[Gary Wright]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Python: How to init a function by calling it using a string]]></title>
    <link href="http://zerosignal0.github.io/blog/2014/05/31/python-how-to-init-a-function-by-calling-it-using-a-string/"/>
    <updated>2014-05-31T23:22:15+00:00</updated>
    <id>http://zerosignal0.github.io/blog/2014/05/31/python-how-to-init-a-function-by-calling-it-using-a-string</id>
    <content type="html"><![CDATA[<p>This topic is an interesting one that I have faced on a few occasions.  There are a couple of different solution that I have found over the last couple of years that work depending on the situation.  So let&rsquo;s back up again and state the problem in the form of a question.</p>

<p>&ldquo;How do you call a function in python guven a string of the functions name?&rdquo;</p>

<p>Generally this behavior is not allowed due to the strict type casting of python, ie. a function must be a function type before being able to call.  So how do you approach calling a function by using a string? *note that both of these examples are assuming that the functions being called are residing within imported modules.</p>

<p>Here are a couple of examples:</p>

<p>1.)  Use the getattr() built-in function to evaluate a module object and provide a string attribute denoting the name of the function to execute.</p>

<p>  example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import foo # Your module
</span><span class='line'>
</span><span class='line'>methodCall = getattr(foo, 'bar')
</span><span class='line'>
</span><span class='line'>result = methodCall()</span></code></pre></td></tr></table></div></figure>


<p>2.) You can also write an abstract function capable of evaluating the string provided in a function object, and also evaluate if the function exists in a graceful way.
This approach is a bit more complex and makes use of a couple of different modules, along with leveraging decorator functions.</p>

<p>  example:</p>

<p>  <b>Place this code into a importable module file called registry.py</b></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Registry(object):
</span><span class='line'>
</span><span class='line'>  def __init__(self):
</span><span class='line'>    self.funcs = {}
</span><span class='line'>
</span><span class='line'>  def execute(self, func):
</span><span class='line'>    self.funcs[func.__name__] = func
</span><span class='line'>    return func
</span><span class='line'>
</span><span class='line'>  def dispatch(self, name, *args, **kwargs):
</span><span class='line'>    try:
</span><span class='line'>      return self.funcs[name](*args, **kwargs)
</span><span class='line'>    except Exception as e:
</span><span class='line'>      raise Error(e)</span></code></pre></td></tr></table></div></figure>


<p>  <b>Now create a file that contains your functions you wish to call.  In this example call this file myfuncs.py</b></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import registry
</span><span class='line'>
</span><span class='line'>callme = registry.Register()
</span><span class='line'>
</span><span class='line'>@callme.execute
</span><span class='line'>def myCoolFunction():
</span><span class='line'>  print 'hello world'</span></code></pre></td></tr></table></div></figure>


<p>  Finally here is the script that will create the string in which we will attempt to execute as a function.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import myfuncs
</span><span class='line'>
</span><span class='line'>runfunc = myfuncs.callme
</span><span class='line'>
</span><span class='line'>runfunc.dispatch('myCoolFunction')</span></code></pre></td></tr></table></div></figure>


<p>As you can see example 2 is quite a bit more involved however can scale to supporting MANY different function template files.  This means that you can further abstract your code into a template language to dynamically import with.</p>

<p>Enjoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Messaging queue showdown: Amazon SQS vs Celery(RabbitMQ)]]></title>
    <link href="http://zerosignal0.github.io/blog/2014/05/25/messaging-queue-showdown-amazon-sqs-vs-celery-rabbitmq/"/>
    <updated>2014-05-25T19:58:12+00:00</updated>
    <id>http://zerosignal0.github.io/blog/2014/05/25/messaging-queue-showdown-amazon-sqs-vs-celery-rabbitmq</id>
    <content type="html"><![CDATA[<p>As I am a previous engineer at Amazon AWS I have plenty of experience with AWS services and have exclusively leveraged SQS in many projects.  I have always had a mostly positive experience with Amazon AWS SQS <a href="https://aws.amazon.com/sqs/">https://aws.amazon.com/sqs/</a> however I have been curious for quite some time what the benefit of rabbitMQ <a href="http://www.rabbitmq.com/">http://www.rabbitmq.com/</a> could be vs. SQS. Message queuing is not a new concept and has existed for years within computer science/engineering see: <a href="http://en.wikipedia.org/wiki/Message_queue">http://en.wikipedia.org/wiki/Message_queue</a> if you are unfamiliar with the concept.</p>

<p>*I would like to firstly point out that my experiences with both services have been with Python, however I did create a test instance and performed the same tests with Java yielding the same results.</p>

<p>So I have to start out by saying that Amazons offering for queuing services is fantastic, relatively cheap and easy.  The community has also built some fantastic programmatic libraries to interact with the web services.  So now you may ask, why look at other services?  Well there can be some possible drawbacks of SQS as well that can cause you some problems depending on the situation.</p>

<p>One drawback of SQS implementation is the need for polling of a message queue to determine if new messages have appeared.  This is a bit of an issue being as you must now model your application to perform a polling cycle in order to determine if new messages are available, and if so build the logic around consuming the message and popping it out of the queue.  You must also be mindful of queue settings that control such things as TTL, maximum message length and which endpoints (if multiple are used) the message is destined for.</p>

<p>Beyond the small issue of having to be responsible for your own polling cycle, you are also billed based upon the number of requests to a queue.  I believe the breakdown on billing is something along the lines of 1 million requests == $100.00.  While this isn’t a ton of money it can still get quite costly if your distributed app has 100s of queue and must all be polled.  Especially if your messages come in bursts, in which case you have a lot of empty queue polling which penalizes you. There are different approaches you can take with SQS to apply back-off algorithms to queuing logic, but the penalty is delay in all other inter-dependent services cascades.</p>

<p>So now enter RabbitMQ.</p>

<p>RabbitMQ is a message queue system based on Erlang and conforming to AMQP (a standard and heavily used message queue protocol).  There are obvious overhead in the fact that you must host your own instances of RabbitMQ along with the infrastructure.  Also obvious reliability in multi-AZ redundancy will need to be considered unless you continue to host your instance within EC2 and configure appropriately.</p>

<p>So now lets talk about the speed of RabbitMQ, I have one word to describe it.  FAST! My testing was performed within Amazon EC2 / AWS within the same region|AZ to be fair.  My test was simple, build a queue, spray 5,000 message to the queue as fast as possible, de-queue and discard message.   There are many different configurations  that RabbitMQ can support such as one-to-one, one-to-many, many-to-many, RPC.  In my example I simply used the default which is one-to-one.</p>

<p>So now the “quarter mile” times between the two.</p>

<p>Amazon AWS SQS: <br>
Region: <b>IAD</b><br>
Service: <b>SQS</b><br>
Total time: <b>5:42 minutes:seconds</b><br></p>

<p>RabbitMQ EC2:<br>
Region: <b>IAD</b><br>
Service: <b>EC2</b><br>
Total time: <b>0:06 minutes:seconds</b><br></p>

<p>What does this prove!?!</p>

<p>Nothing really besides shoving a lot of messages down the pipe and pulling them out on the other side IS indeed faster using RabbitMQ.  This does not prove however that the actual service is “better” than SQS by any stretch of the imagination.  Both services provide pro/con, and SQS has a rich history of reliable service that affords a great mixture of safe queuing along with a rock solid infrastructure.</p>

<p>On the other hand depending on the configuration of RabbitMQ you can gain a lot of these safeties with seemingly smaller hit in performance in terms of delivery times.  I hope to revisit this topic once I have more time to spend, hopefully this helps educate anyone that is posed with approaching these services in the future though.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Redis to the rescue]]></title>
    <link href="http://zerosignal0.github.io/blog/2014/05/23/redis-to-the-rescue-slash/"/>
    <updated>2014-05-23T06:36:28+00:00</updated>
    <id>http://zerosignal0.github.io/blog/2014/05/23/redis-to-the-rescue-slash</id>
    <content type="html"><![CDATA[<p>In working on a project I was having some issues with storing data with a MySQL server that required many read/writes.  Normally this wouldn&rsquo;t be a huge deal except for the systems are states away from eachother with less than reliable throughput and no option for scalable cloud solutions.  I did however have another host in close proximity that was capable of hosting a REDIS based server for me to read/write to.  I have worked with REDIS once before but this experience has been AWESOME so far!  Key/Data stores are one thing but the speed of this technology, when implemented correctly, blows my mind every time.  If you haven&rsquo;t had the chance to work with REDIS you should give it a try, here is a AWESOME interactive demo <a href="http://try.redis.io/">http://try.redis.io/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello world from my shiny new octopress site]]></title>
    <link href="http://zerosignal0.github.io/blog/2014/05/22/hello-world-from-my-shiny-new-octopress-site/"/>
    <updated>2014-05-22T16:47:28+00:00</updated>
    <id>http://zerosignal0.github.io/blog/2014/05/22/hello-world-from-my-shiny-new-octopress-site</id>
    <content type="html"><![CDATA[<p>Ahoy there, world!</p>
]]></content>
  </entry>
  
</feed>
